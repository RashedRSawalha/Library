2025-01-21 13:42:06.939 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-01-21 13:42:18.511 +03:00 [INF] HTTP POST /api/RoleManagegement/login responded 200 in 15777.9005 ms
2025-01-21 13:42:44.829 +03:00 [INF] Fetching all Authors
2025-01-21 13:42:45.026 +03:00 [INF] HTTP GET /api/Authors responded 200 in 4347.3277 ms
2025-01-21 13:44:25.856 +03:00 [INF] Fetching all Authors
2025-01-21 13:45:01.630 +03:00 [INF] HTTP GET /api/Authors responded 200 in 49713.0779 ms
2025-01-21 13:49:31.826 +03:00 [INF] Fetching all Authors
2025-01-21 13:49:32.172 +03:00 [INF] HTTP GET /api/Authors responded 200 in 615.9162 ms
2025-01-21 13:54:32.596 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-01-21 13:54:32.736 +03:00 [DBG] Hosting starting
2025-01-21 13:54:32.790 +03:00 [INF] User profile is available. Using 'C:\Users\rashe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-21 13:54:32.806 +03:00 [DBG] Reading data from file 'C:\Users\rashe\AppData\Local\ASP.NET\DataProtection-Keys\key-34f2e68a-4570-439a-8454-209f4db72d73.xml'.
2025-01-21 13:54:32.868 +03:00 [DBG] Found key {34f2e68a-4570-439a-8454-209f4db72d73}.
2025-01-21 13:54:32.883 +03:00 [DBG] Considering key {34f2e68a-4570-439a-8454-209f4db72d73} with expiration date 2025-04-13 07:54:25Z as default key.
2025-01-21 13:54:32.887 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-01-21 13:54:32.889 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-01-21 13:54:32.891 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-01-21 13:54:32.897 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-01-21 13:54:32.899 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-01-21 13:54:32.900 +03:00 [DBG] Using key {34f2e68a-4570-439a-8454-209f4db72d73} as the default key.
2025-01-21 13:54:32.902 +03:00 [DBG] Key ring with default key {34f2e68a-4570-439a-8454-209f4db72d73} was loaded during application startup.
2025-01-21 13:54:33.196 +03:00 [DBG] Loaded hosting startup assembly LibraryManagementAPI
2025-01-21 13:54:33.198 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-01-21 13:54:33.198 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-01-21 13:54:33.198 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-01-21 13:54:33.322 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/swagger/index.html - null null
2025-01-21 13:54:33.441 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-21 13:54:33.441 +03:00 [INF] Hosting environment: Development
2025-01-21 13:54:33.442 +03:00 [INF] Content root path: C:\Users\rashe\OneDrive\Desktop\Codes\Library\Library
2025-01-21 13:54:33.442 +03:00 [DBG] Hosting started
2025-01-21 13:54:33.724 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-01-21 13:54:33.769 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-01-21 13:54:33.771 +03:00 [DBG] Request did not match any endpoints
2025-01-21 13:54:33.861 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-01-21 13:54:33.863 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-01-21 13:54:33.922 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-01-21 13:54:33.923 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-01-21 13:54:33.932 +03:00 [DBG] Connection ID "18230571309580943392" disconnecting.
2025-01-21 13:54:33.934 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/swagger/index.html - 200 null text/html;charset=utf-8 624.2782ms
2025-01-21 13:54:35.706 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/_vs/browserLink - null null
2025-01-21 13:54:35.706 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/_framework/aspnetcore-browser-refresh.js - null null
2025-01-21 13:54:35.720 +03:00 [DBG] Connection ID "18302628890733969410" disconnecting.
2025-01-21 13:54:35.724 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 14.8048ms
2025-01-21 13:54:35.866 +03:00 [DBG] Connection ID "18374686527721570317" disconnecting.
2025-01-21 13:54:35.869 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/_vs/browserLink - 200 null text/javascript; charset=UTF-8 163.9722ms
2025-01-21 13:54:38.387 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/swagger/v1/swagger.json - null null
2025-01-21 13:54:38.388 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-01-21 13:54:38.389 +03:00 [DBG] Request did not match any endpoints
2025-01-21 13:54:38.423 +03:00 [DBG] Connection ID "18230571309580943394" disconnecting.
2025-01-21 13:54:38.423 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.1242ms
2025-01-21 13:56:05.405 +03:00 [INF] Request starting HTTP/2 POST https://localhost:44328/api/RoleManagegement/login - application/json 42
2025-01-21 13:56:05.501 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoleManagegement/login'
2025-01-21 13:56:05.513 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)' with route pattern 'api/RoleManagegement/login' is valid for the request path '/api/RoleManagegement/login'
2025-01-21 13:56:05.523 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)'
2025-01-21 13:56:05.545 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 13:56:05.857 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-01-21 13:56:05.877 +03:00 [DBG] The request has an origin header: 'https://localhost:44328'.
2025-01-21 13:56:05.878 +03:00 [INF] CORS policy execution successful.
2025-01-21 13:56:05.880 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)'
2025-01-21 13:56:06.017 +03:00 [INF] Route matched with {action = "Login", controller = "RoleManagegement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LibraryManagementDomain.Models.LoginModel) on controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI).
2025-01-21 13:56:06.021 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-01-21 13:56:06.022 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 13:56:06.023 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 13:56:06.024 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 13:56:06.025 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 13:56:06.028 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 13:56:06.478 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-01-21 13:56:07.500 +03:00 [DBG] The index {'CourseId'} was not created on entity type 'StudentCourse (Dictionary<string, object>)' as the properties are already covered by the index {'CourseId', 'StudentId'}.
2025-01-21 13:56:07.830 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-01-21 13:56:08.517 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 13:56:08.548 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 13:56:08.566 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel' ...
2025-01-21 13:56:08.571 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel' using the name '' in request data ...
2025-01-21 13:56:08.576 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-01-21 13:56:08.670 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'LibraryManagementDomain.Models.LoginModel'
2025-01-21 13:56:08.671 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel'.
2025-01-21 13:56:08.671 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel'.
2025-01-21 13:56:08.672 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel' ...
2025-01-21 13:56:08.694 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel'.
2025-01-21 13:56:08.815 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __model_Id_0)'
2025-01-21 13:56:09.240 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.PasswordHash (string) Required, 1], [Property: User.RoleId (int) Required, 2] }
            SELECT TOP(1) u.Id, u.PasswordHash, u.RoleId
            FROM Users AS u
            WHERE u.Id == @__model_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.PasswordHash (string) Required, 1], [Property: User.RoleId (int) Required, 2] }
            SELECT TOP(1) u.Id, u.PasswordHash, u.RoleId
            FROM Users AS u
            WHERE u.Id == @__model_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(1);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(2);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: LibraryManagementInfrastructure.LibraryDBContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-01-21 13:56:09.340 +03:00 [DBG] Creating DbConnection.
2025-01-21 13:56:09.529 +03:00 [DBG] Created DbConnection. (204ms).
2025-01-21 13:56:09.542 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:10.141 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:10.149 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 13:56:10.166 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (11ms).
2025-01-21 13:56:10.179 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (30ms).
2025-01-21 13:56:10.194 +03:00 [DBG] Executing DbCommand [Parameters=[@__model_Id_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId"
FROM "Users" AS u
WHERE u."Id" = @__model_Id_0
LIMIT 1
2025-01-21 13:56:10.353 +03:00 [INF] Executed DbCommand (156ms) [Parameters=[@__model_Id_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId"
FROM "Users" AS u
WHERE u."Id" = @__model_Id_0
LIMIT 1
2025-01-21 13:56:10.455 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'User' entity with key '{Id: 7}'.
2025-01-21 13:56:10.504 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:10.523 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 157ms reading results.
2025-01-21 13:56:10.533 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:10.542 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (9ms).
2025-01-21 13:56:11.200 +03:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.Id == __user_RoleId_0)'
2025-01-21 13:56:11.218 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Role>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.Name (string) Required, 1] }
            SELECT TOP(1) r.Id, r.Name
            FROM Roles AS r
            WHERE r.Id == @__user_RoleId_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.Name (string) Required, 1] }
            SELECT TOP(1) r.Id, r.Name
            FROM Roles AS r
            WHERE r.Id == @__user_RoleId_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Role instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Role);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Role)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Name>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: LibraryManagementInfrastructure.LibraryDBContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-01-21 13:56:11.226 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:11.227 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:11.228 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 13:56:11.228 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 13:56:11.229 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 13:56:11.229 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_RoleId_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name"
FROM "Roles" AS r
WHERE r."Id" = @__user_RoleId_0
LIMIT 1
2025-01-21 13:56:11.246 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__user_RoleId_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name"
FROM "Roles" AS r
WHERE r."Id" = @__user_RoleId_0
LIMIT 1
2025-01-21 13:56:11.255 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Role' entity with key '{Id: 7}'.
2025-01-21 13:56:11.262 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:11.263 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 15ms reading results.
2025-01-21 13:56:11.263 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:11.263 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 13:56:11.273 +03:00 [DBG] Compiling query expression: 
'DbSet<RolePermission>()
    .Where(rp => rp.RoleId == __role_Id_0)
    .Select(rp => rp.Permission)'
2025-01-21 13:56:11.288 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Permission
        FROM RolePermissions AS r
        WHERE r.RoleId == @__role_Id_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Permission
        FROM RolePermissions AS r
        WHERE r.RoleId == @__role_Id_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.GetString(0);
        return value1;
    }, 
    contextType: LibraryManagementInfrastructure.LibraryDBContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-01-21 13:56:11.290 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:11.291 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:11.291 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 13:56:11.291 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 13:56:11.291 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 13:56:11.291 +03:00 [DBG] Executing DbCommand [Parameters=[@__role_Id_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Permission"
FROM "RolePermissions" AS r
WHERE r."RoleId" = @__role_Id_0
2025-01-21 13:56:11.298 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__role_Id_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Permission"
FROM "RolePermissions" AS r
WHERE r."RoleId" = @__role_Id_0
2025-01-21 13:56:11.302 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:11.302 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 3ms reading results.
2025-01-21 13:56:11.303 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:11.303 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 13:56:11.431 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 13:56:11.435 +03:00 [DBG] No information found on request to perform content negotiation.
2025-01-21 13:56:11.435 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 13:56:11.435 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 13:56:11.437 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 13:56:11.438 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-21 13:56:11.471 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI) in 5440.2036ms
2025-01-21 13:56:11.472 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)'
2025-01-21 13:56:11.479 +03:00 [INF] HTTP POST /api/RoleManagegement/login responded 200 in 5922.6442 ms
2025-01-21 13:56:11.502 +03:00 [DBG] Connection ID "18230571318170877953" disconnecting.
2025-01-21 13:56:11.502 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 13:56:11.508 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:11.511 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (3ms).
2025-01-21 13:56:11.515 +03:00 [INF] Request finished HTTP/2 POST https://localhost:44328/api/RoleManagegement/login - 200 null application/json; charset=utf-8 6132.9545ms
2025-01-21 13:56:39.723 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/api/Authors - null null
2025-01-21 13:56:39.735 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Authors'
2025-01-21 13:56:39.737 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)' with route pattern 'api/Authors' is valid for the request path '/api/Authors'
2025-01-21 13:56:39.740 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 13:56:39.752 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 13:56:39.853 +03:00 [DBG] Successfully validated the token.
2025-01-21 13:56:39.856 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-01-21 13:56:39.899 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 13:56:39.917 +03:00 [INF] Route matched with {action = "GetAuthors", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[LibraryManagementDomain.DTO.AuthorDTO]]] GetAuthors() on controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI).
2025-01-21 13:56:39.919 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["LibraryManagementApplication.Authorization.AuthorizeRoleOrPermissionAttribute"]
2025-01-21 13:56:39.919 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 13:56:39.919 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 13:56:39.919 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 13:56:39.920 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 13:56:39.922 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 13:56:40.025 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 13:56:40.029 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 13:56:40.033 +03:00 [INF] Fetching all Authors
2025-01-21 13:56:40.058 +03:00 [DBG] Compiling query expression: 
'DbSet<Author>()'
2025-01-21 13:56:40.085 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Author>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Author.AuthorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Author.AuthorAge (int) Required, 1], [Property: Author.AuthorType (short) Required, 2], [Property: Author.Name (string) Required MaxLength(100), 3] }
        SELECT a.AuthorId, a.AuthorAge, a.AuthorType, a.Name
        FROM Authors AS a) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Author.AuthorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Author.AuthorAge (int) Required, 1], [Property: Author.AuthorType (short) Required, 2], [Property: Author.Name (string) Required MaxLength(100), 3] }
        SELECT a.AuthorId, a.AuthorAge, a.AuthorType, a.Name
        FROM Authors AS a, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Author entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Author instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Author);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Author.AuthorId PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Author)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")]: 
                        {
                            return 
                            {
                                Author instance;
                                instance = new Author();
                                instance.<AuthorId>k__BackingField = dataReader.GetInt32(0);
                                instance.<AuthorAge>k__BackingField = dataReader.GetInt32(1);
                                instance.<AuthorType>k__BackingField = Invoke(((CastingConverter<short, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Author.AuthorType (short) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author").FindProperty("AuthorType")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(2));
                                instance.<Name>k__BackingField = dataReader.GetString(3);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Author)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: LibraryManagementInfrastructure.LibraryDBContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-01-21 13:56:40.090 +03:00 [DBG] Creating DbConnection.
2025-01-21 13:56:40.090 +03:00 [DBG] Created DbConnection. (0ms).
2025-01-21 13:56:40.091 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:40.091 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:40.091 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 13:56:40.091 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 13:56:40.091 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 13:56:40.091 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 13:56:40.123 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 13:56:40.142 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Author' entity with key '{AuthorId: 1}'.
2025-01-21 13:56:40.156 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:40.157 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 29ms reading results.
2025-01-21 13:56:40.157 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:40.157 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 13:56:40.162 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 13:56:40.165 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-01-21 13:56:40.167 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-01-21 13:56:40.167 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 13:56:40.167 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 13:56:40.167 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 13:56:40.167 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[LibraryManagementDomain.Entities.Author, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[LibraryManagementDomain.DTO.AuthorDTO, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 13:56:40.201 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI) in 281.2679ms
2025-01-21 13:56:40.202 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 13:56:40.202 +03:00 [INF] HTTP GET /api/Authors responded 200 in 450.1152 ms
2025-01-21 13:56:40.204 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 13:56:40.205 +03:00 [DBG] Connection ID "18158513706953080834" disconnecting.
2025-01-21 13:56:40.205 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:56:40.206 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (1ms).
2025-01-21 13:56:40.206 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/api/Authors - 200 null application/json; charset=utf-8 488.3635ms
2025-01-21 13:57:04.035 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/api/Authors - null null
2025-01-21 13:57:04.036 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Authors'
2025-01-21 13:57:04.036 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)' with route pattern 'api/Authors' is valid for the request path '/api/Authors'
2025-01-21 13:57:04.037 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 13:57:04.037 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 13:57:04.043 +03:00 [DBG] Successfully validated the token.
2025-01-21 13:57:04.044 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-01-21 13:57:04.046 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 13:57:04.047 +03:00 [INF] Route matched with {action = "GetAuthors", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[LibraryManagementDomain.DTO.AuthorDTO]]] GetAuthors() on controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI).
2025-01-21 13:57:04.048 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["LibraryManagementApplication.Authorization.AuthorizeRoleOrPermissionAttribute"]
2025-01-21 13:57:04.048 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 13:57:04.048 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 13:57:04.048 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 13:57:04.048 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 13:57:04.049 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 13:57:04.074 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 13:57:04.075 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 13:57:04.075 +03:00 [INF] Fetching all Authors
2025-01-21 13:57:04.086 +03:00 [DBG] Creating DbConnection.
2025-01-21 13:57:04.088 +03:00 [DBG] Created DbConnection. (2ms).
2025-01-21 13:57:04.088 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:57:04.088 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:57:04.088 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 13:57:04.088 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 13:57:04.088 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 13:57:04.088 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 13:57:04.096 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 13:57:04.101 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Author' entity with key '{AuthorId: 1}'.
2025-01-21 13:57:04.106 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:57:04.108 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 6ms reading results.
2025-01-21 13:57:04.108 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:57:04.108 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 13:57:04.115 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 13:57:04.115 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-01-21 13:57:04.118 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-01-21 13:57:04.118 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 13:57:04.118 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 13:57:04.118 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 13:57:04.118 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[LibraryManagementDomain.Entities.Author, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[LibraryManagementDomain.DTO.AuthorDTO, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 13:57:04.120 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI) in 71.2821ms
2025-01-21 13:57:04.120 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 13:57:04.120 +03:00 [INF] HTTP GET /api/Authors responded 200 in 83.2175 ms
2025-01-21 13:57:04.121 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 13:57:04.121 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 13:57:04.121 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 13:57:04.121 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/api/Authors - 200 null application/json; charset=utf-8 86.5928ms
2025-01-21 13:58:38.382 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client ''
2025-01-21 13:58:49.328 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-01-21 13:58:49.418 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 11.4649ms - processed: 0 items - remaining: 1 items
2025-01-21 13:59:46.894 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-01-21 13:59:47.121 +03:00 [DBG] Hosting starting
2025-01-21 13:59:47.204 +03:00 [INF] User profile is available. Using 'C:\Users\rashe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-21 13:59:47.243 +03:00 [DBG] Reading data from file 'C:\Users\rashe\AppData\Local\ASP.NET\DataProtection-Keys\key-34f2e68a-4570-439a-8454-209f4db72d73.xml'.
2025-01-21 13:59:49.646 +03:00 [DBG] Found key {34f2e68a-4570-439a-8454-209f4db72d73}.
2025-01-21 13:59:51.018 +03:00 [DBG] Considering key {34f2e68a-4570-439a-8454-209f4db72d73} with expiration date 2025-04-13 07:54:25Z as default key.
2025-01-21 13:59:51.299 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-01-21 13:59:51.302 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-01-21 13:59:51.408 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-01-21 13:59:51.568 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-01-21 13:59:51.638 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-01-21 13:59:51.675 +03:00 [DBG] Using key {34f2e68a-4570-439a-8454-209f4db72d73} as the default key.
2025-01-21 13:59:51.745 +03:00 [DBG] Key ring with default key {34f2e68a-4570-439a-8454-209f4db72d73} was loaded during application startup.
2025-01-21 13:59:52.278 +03:00 [DBG] Loaded hosting startup assembly LibraryManagementAPI
2025-01-21 13:59:52.280 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-01-21 13:59:52.280 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-01-21 13:59:52.280 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-01-21 13:59:52.398 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/swagger/index.html - null null
2025-01-21 13:59:52.858 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-21 13:59:52.858 +03:00 [INF] Hosting environment: Development
2025-01-21 13:59:52.858 +03:00 [INF] Content root path: C:\Users\rashe\OneDrive\Desktop\Codes\Library\Library
2025-01-21 13:59:52.858 +03:00 [DBG] Hosting started
2025-01-21 13:59:53.141 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-01-21 13:59:53.192 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-01-21 13:59:53.194 +03:00 [DBG] Request did not match any endpoints
2025-01-21 13:59:53.409 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-01-21 13:59:53.413 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-01-21 13:59:53.501 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-01-21 13:59:53.502 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-01-21 13:59:53.530 +03:00 [DBG] Connection ID "18302628899323904003" disconnecting.
2025-01-21 13:59:53.535 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/swagger/index.html - 200 null text/html;charset=utf-8 1158.2672ms
2025-01-21 13:59:56.257 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/_vs/browserLink - null null
2025-01-21 13:59:56.258 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/_framework/aspnetcore-browser-refresh.js - null null
2025-01-21 13:59:56.374 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 111.8723ms
2025-01-21 13:59:56.395 +03:00 [DBG] Connection ID "18374686523426603038" disconnecting.
2025-01-21 13:59:56.627 +03:00 [DBG] Connection ID "18302628925093707790" disconnecting.
2025-01-21 13:59:56.629 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/_vs/browserLink - 200 null text/javascript; charset=UTF-8 372.6209ms
2025-01-21 13:59:59.063 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/swagger/v1/swagger.json - null null
2025-01-21 13:59:59.064 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-01-21 13:59:59.064 +03:00 [DBG] Request did not match any endpoints
2025-01-21 13:59:59.342 +03:00 [DBG] Connection ID "18374686510541701151" disconnecting.
2025-01-21 13:59:59.344 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 280.7673ms
2025-01-21 14:00:24.142 +03:00 [INF] Request starting HTTP/2 POST https://localhost:44328/api/RoleManagegement/login - application/json 42
2025-01-21 14:00:24.340 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoleManagegement/login'
2025-01-21 14:00:24.344 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)' with route pattern 'api/RoleManagegement/login' is valid for the request path '/api/RoleManagegement/login'
2025-01-21 14:00:24.345 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)'
2025-01-21 14:00:24.358 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 14:00:24.557 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-01-21 14:00:24.569 +03:00 [DBG] The request has an origin header: 'https://localhost:44328'.
2025-01-21 14:00:24.569 +03:00 [INF] CORS policy execution successful.
2025-01-21 14:00:24.573 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)'
2025-01-21 14:00:24.644 +03:00 [INF] Route matched with {action = "Login", controller = "RoleManagegement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LibraryManagementDomain.Models.LoginModel) on controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI).
2025-01-21 14:00:24.646 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-01-21 14:00:24.647 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 14:00:24.647 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 14:00:24.648 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 14:00:24.648 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 14:00:24.652 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 14:00:25.039 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-01-21 14:00:26.218 +03:00 [DBG] The index {'CourseId'} was not created on entity type 'StudentCourse (Dictionary<string, object>)' as the properties are already covered by the index {'CourseId', 'StudentId'}.
2025-01-21 14:00:30.206 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-01-21 14:00:30.340 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 14:00:30.359 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 14:00:30.370 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel' ...
2025-01-21 14:00:30.373 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel' using the name '' in request data ...
2025-01-21 14:00:30.374 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-01-21 14:00:30.435 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'LibraryManagementDomain.Models.LoginModel'
2025-01-21 14:00:30.436 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel'.
2025-01-21 14:00:30.436 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel'.
2025-01-21 14:00:30.437 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel' ...
2025-01-21 14:00:30.459 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel'.
2025-01-21 14:00:30.551 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __model_Id_0)'
2025-01-21 14:00:30.904 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.PasswordHash (string) Required, 1], [Property: User.RoleId (int) Required, 2] }
            SELECT TOP(1) u.Id, u.PasswordHash, u.RoleId
            FROM Users AS u
            WHERE u.Id == @__model_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.PasswordHash (string) Required, 1], [Property: User.RoleId (int) Required, 2] }
            SELECT TOP(1) u.Id, u.PasswordHash, u.RoleId
            FROM Users AS u
            WHERE u.Id == @__model_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(1);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(2);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: LibraryManagementInfrastructure.LibraryDBContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-01-21 14:00:30.953 +03:00 [DBG] Creating DbConnection.
2025-01-21 14:00:31.037 +03:00 [DBG] Created DbConnection. (86ms).
2025-01-21 14:00:31.046 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:31.484 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:31.488 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 14:00:31.495 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-01-21 14:00:31.502 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-01-21 14:00:31.512 +03:00 [DBG] Executing DbCommand [Parameters=[@__model_Id_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId"
FROM "Users" AS u
WHERE u."Id" = @__model_Id_0
LIMIT 1
2025-01-21 14:00:31.627 +03:00 [INF] Executed DbCommand (110ms) [Parameters=[@__model_Id_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId"
FROM "Users" AS u
WHERE u."Id" = @__model_Id_0
LIMIT 1
2025-01-21 14:00:31.687 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'User' entity with key '{Id: 7}'.
2025-01-21 14:00:31.705 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:31.713 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 80ms reading results.
2025-01-21 14:00:31.721 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:31.726 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (5ms).
2025-01-21 14:00:32.045 +03:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.Id == __user_RoleId_0)'
2025-01-21 14:00:32.051 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Role>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.Name (string) Required, 1] }
            SELECT TOP(1) r.Id, r.Name
            FROM Roles AS r
            WHERE r.Id == @__user_RoleId_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.Name (string) Required, 1] }
            SELECT TOP(1) r.Id, r.Name
            FROM Roles AS r
            WHERE r.Id == @__user_RoleId_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Role instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Role);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Role)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Name>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: LibraryManagementInfrastructure.LibraryDBContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-01-21 14:00:32.056 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:32.057 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:32.057 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 14:00:32.057 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 14:00:32.057 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 14:00:32.057 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_RoleId_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name"
FROM "Roles" AS r
WHERE r."Id" = @__user_RoleId_0
LIMIT 1
2025-01-21 14:00:32.067 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__user_RoleId_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name"
FROM "Roles" AS r
WHERE r."Id" = @__user_RoleId_0
LIMIT 1
2025-01-21 14:00:32.072 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Role' entity with key '{Id: 7}'.
2025-01-21 14:00:32.076 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:32.076 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 8ms reading results.
2025-01-21 14:00:32.076 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:32.076 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 14:00:32.080 +03:00 [DBG] Compiling query expression: 
'DbSet<RolePermission>()
    .Where(rp => rp.RoleId == __role_Id_0)
    .Select(rp => rp.Permission)'
2025-01-21 14:00:32.089 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Permission
        FROM RolePermissions AS r
        WHERE r.RoleId == @__role_Id_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Permission
        FROM RolePermissions AS r
        WHERE r.RoleId == @__role_Id_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.GetString(0);
        return value1;
    }, 
    contextType: LibraryManagementInfrastructure.LibraryDBContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-01-21 14:00:32.091 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:32.091 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:32.091 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 14:00:32.091 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 14:00:32.091 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 14:00:32.091 +03:00 [DBG] Executing DbCommand [Parameters=[@__role_Id_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Permission"
FROM "RolePermissions" AS r
WHERE r."RoleId" = @__role_Id_0
2025-01-21 14:00:32.096 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__role_Id_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Permission"
FROM "RolePermissions" AS r
WHERE r."RoleId" = @__role_Id_0
2025-01-21 14:00:32.100 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:32.100 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 3ms reading results.
2025-01-21 14:00:32.100 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:32.100 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 14:00:32.184 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 14:00:32.186 +03:00 [DBG] No information found on request to perform content negotiation.
2025-01-21 14:00:32.186 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 14:00:32.187 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 14:00:32.187 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 14:00:32.188 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-21 14:00:32.213 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI) in 7561.6513ms
2025-01-21 14:00:32.214 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)'
2025-01-21 14:00:32.219 +03:00 [INF] HTTP POST /api/RoleManagegement/login responded 200 in 7854.6649 ms
2025-01-21 14:00:32.224 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 14:00:32.228 +03:00 [DBG] Connection ID "18302628903618871305" disconnecting.
2025-01-21 14:00:32.230 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:32.233 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (1ms).
2025-01-21 14:00:32.235 +03:00 [INF] Request finished HTTP/2 POST https://localhost:44328/api/RoleManagegement/login - 200 null application/json; charset=utf-8 8093.6102ms
2025-01-21 14:00:51.940 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/api/Authors - null null
2025-01-21 14:00:51.945 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Authors'
2025-01-21 14:00:51.946 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)' with route pattern 'api/Authors' is valid for the request path '/api/Authors'
2025-01-21 14:00:51.947 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 14:00:51.951 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 14:00:52.081 +03:00 [DBG] Successfully validated the token.
2025-01-21 14:00:52.085 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-01-21 14:00:52.123 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 14:00:52.136 +03:00 [INF] Route matched with {action = "GetAuthors", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[LibraryManagementDomain.DTO.AuthorDTO]]] GetAuthors() on controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI).
2025-01-21 14:00:52.137 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["LibraryManagementApplication.Authorization.AuthorizeRoleOrPermissionAttribute"]
2025-01-21 14:00:52.137 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 14:00:52.137 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 14:00:52.137 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 14:00:52.138 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 14:00:52.141 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 14:00:52.278 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 14:00:52.284 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 14:00:52.308 +03:00 [INF] Fetching all Authors
2025-01-21 14:00:52.325 +03:00 [DBG] Compiling query expression: 
'DbSet<Author>()'
2025-01-21 14:00:52.355 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Author>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Author.AuthorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Author.AuthorAge (int) Required, 1], [Property: Author.AuthorType (short) Required, 2], [Property: Author.Name (string) Required MaxLength(100), 3] }
        SELECT a.AuthorId, a.AuthorAge, a.AuthorType, a.Name
        FROM Authors AS a) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Author.AuthorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Author.AuthorAge (int) Required, 1], [Property: Author.AuthorType (short) Required, 2], [Property: Author.Name (string) Required MaxLength(100), 3] }
        SELECT a.AuthorId, a.AuthorAge, a.AuthorType, a.Name
        FROM Authors AS a, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Author entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Author instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Author);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Author.AuthorId PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Author)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")]: 
                        {
                            return 
                            {
                                Author instance;
                                instance = new Author();
                                instance.<AuthorId>k__BackingField = dataReader.GetInt32(0);
                                instance.<AuthorAge>k__BackingField = dataReader.GetInt32(1);
                                instance.<AuthorType>k__BackingField = Invoke(((CastingConverter<short, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Author.AuthorType (short) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author").FindProperty("AuthorType")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(2));
                                instance.<Name>k__BackingField = dataReader.GetString(3);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Author)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: LibraryManagementInfrastructure.LibraryDBContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-01-21 14:00:52.362 +03:00 [DBG] Creating DbConnection.
2025-01-21 14:00:52.363 +03:00 [DBG] Created DbConnection. (0ms).
2025-01-21 14:00:52.363 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:52.364 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:52.364 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 14:00:52.364 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 14:00:52.365 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 14:00:52.365 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 14:00:52.384 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 14:00:52.410 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Author' entity with key '{AuthorId: 1}'.
2025-01-21 14:00:52.430 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:52.431 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 44ms reading results.
2025-01-21 14:00:52.431 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:52.431 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 14:00:52.435 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 14:00:52.437 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-01-21 14:00:52.439 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-01-21 14:00:52.439 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 14:00:52.439 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 14:00:52.439 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 14:00:52.439 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[LibraryManagementDomain.Entities.Author, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[LibraryManagementDomain.DTO.AuthorDTO, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 14:00:52.465 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI) in 326.8457ms
2025-01-21 14:00:52.465 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 14:00:52.465 +03:00 [INF] HTTP GET /api/Authors responded 200 in 513.7982 ms
2025-01-21 14:00:52.466 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 14:00:52.467 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:00:52.468 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 14:00:52.471 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/api/Authors - 200 null application/json; charset=utf-8 531.2303ms
2025-01-21 14:00:52.478 +03:00 [DBG] Connection ID "18302628920798740484" disconnecting.
2025-01-21 14:02:31.547 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client ''
2025-01-21 14:22:10.759 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-01-21 14:22:11.066 +03:00 [DBG] Hosting starting
2025-01-21 14:22:11.177 +03:00 [INF] User profile is available. Using 'C:\Users\rashe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-21 14:22:11.220 +03:00 [DBG] Reading data from file 'C:\Users\rashe\AppData\Local\ASP.NET\DataProtection-Keys\key-34f2e68a-4570-439a-8454-209f4db72d73.xml'.
2025-01-21 14:22:11.281 +03:00 [DBG] Found key {34f2e68a-4570-439a-8454-209f4db72d73}.
2025-01-21 14:22:11.311 +03:00 [DBG] Considering key {34f2e68a-4570-439a-8454-209f4db72d73} with expiration date 2025-04-13 07:54:25Z as default key.
2025-01-21 14:22:11.318 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-01-21 14:22:11.325 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-01-21 14:22:11.329 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-01-21 14:22:11.341 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-01-21 14:22:11.344 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-01-21 14:22:11.348 +03:00 [DBG] Using key {34f2e68a-4570-439a-8454-209f4db72d73} as the default key.
2025-01-21 14:22:11.350 +03:00 [DBG] Key ring with default key {34f2e68a-4570-439a-8454-209f4db72d73} was loaded during application startup.
2025-01-21 14:22:11.677 +03:00 [DBG] Loaded hosting startup assembly LibraryManagementAPI
2025-01-21 14:22:11.686 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-01-21 14:22:11.687 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-01-21 14:22:11.687 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-01-21 14:22:11.824 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/swagger/index.html - null null
2025-01-21 14:22:12.039 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-21 14:22:12.039 +03:00 [INF] Hosting environment: Development
2025-01-21 14:22:12.039 +03:00 [INF] Content root path: C:\Users\rashe\OneDrive\Desktop\Codes\Library\Library
2025-01-21 14:22:12.039 +03:00 [DBG] Hosting started
2025-01-21 14:22:12.130 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-01-21 14:22:12.171 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-01-21 14:22:12.172 +03:00 [DBG] Request did not match any endpoints
2025-01-21 14:22:12.323 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-01-21 14:22:12.328 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-01-21 14:22:12.540 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-01-21 14:22:12.542 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-01-21 14:22:12.563 +03:00 [DBG] Connection ID "18158513698363146263" disconnecting.
2025-01-21 14:22:12.567 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/swagger/index.html - 200 null text/html;charset=utf-8 759.8202ms
2025-01-21 14:22:14.743 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/_framework/aspnetcore-browser-refresh.js - null null
2025-01-21 14:22:14.755 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/_vs/browserLink - null null
2025-01-21 14:22:14.771 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 23.5807ms
2025-01-21 14:22:14.978 +03:00 [DBG] Connection ID "18374686523426603042" disconnecting.
2025-01-21 14:22:14.979 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/_vs/browserLink - 200 null text/javascript; charset=UTF-8 224.0956ms
2025-01-21 14:22:16.500 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/swagger/v1/swagger.json - null null
2025-01-21 14:22:16.500 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-01-21 14:22:16.501 +03:00 [DBG] Request did not match any endpoints
2025-01-21 14:22:16.570 +03:00 [DBG] Connection ID "18374686523426603044" disconnecting.
2025-01-21 14:22:16.570 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.1387ms
2025-01-21 14:22:41.138 +03:00 [INF] Request starting HTTP/2 POST https://localhost:44328/api/RoleManagegement/login - application/json 42
2025-01-21 14:22:41.292 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoleManagegement/login'
2025-01-21 14:22:41.311 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)' with route pattern 'api/RoleManagegement/login' is valid for the request path '/api/RoleManagegement/login'
2025-01-21 14:22:41.320 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)'
2025-01-21 14:22:41.358 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 14:22:42.234 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-01-21 14:22:42.283 +03:00 [DBG] The request has an origin header: 'https://localhost:44328'.
2025-01-21 14:22:42.284 +03:00 [INF] CORS policy execution successful.
2025-01-21 14:22:42.296 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)'
2025-01-21 14:22:42.865 +03:00 [INF] Route matched with {action = "Login", controller = "RoleManagegement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LibraryManagementDomain.Models.LoginModel) on controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI).
2025-01-21 14:22:42.877 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-01-21 14:22:42.879 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 14:22:42.883 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 14:22:42.883 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 14:22:42.884 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 14:22:42.893 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 14:22:48.146 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-01-21 14:22:49.013 +03:00 [DBG] The index {'CourseId'} was not created on entity type 'StudentCourse (Dictionary<string, object>)' as the properties are already covered by the index {'CourseId', 'StudentId'}.
2025-01-21 14:22:49.231 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-01-21 14:22:49.433 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 14:22:49.482 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 14:22:49.505 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel' ...
2025-01-21 14:22:49.517 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel' using the name '' in request data ...
2025-01-21 14:22:49.522 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-01-21 14:22:49.637 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'LibraryManagementDomain.Models.LoginModel'
2025-01-21 14:22:49.638 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel'.
2025-01-21 14:22:49.638 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel'.
2025-01-21 14:22:49.638 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel' ...
2025-01-21 14:22:49.671 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel'.
2025-01-21 14:22:49.830 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __model_Id_0)'
2025-01-21 14:22:50.529 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.PasswordHash (string) Required, 1], [Property: User.RoleId (int) Required, 2] }
            SELECT TOP(1) u.Id, u.PasswordHash, u.RoleId
            FROM Users AS u
            WHERE u.Id == @__model_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.PasswordHash (string) Required, 1], [Property: User.RoleId (int) Required, 2] }
            SELECT TOP(1) u.Id, u.PasswordHash, u.RoleId
            FROM Users AS u
            WHERE u.Id == @__model_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(1);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(2);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: LibraryManagementInfrastructure.LibraryDBContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-01-21 14:22:50.711 +03:00 [DBG] Creating DbConnection.
2025-01-21 14:22:50.928 +03:00 [DBG] Created DbConnection. (211ms).
2025-01-21 14:22:50.948 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:52.185 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:52.198 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 14:22:52.221 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (16ms).
2025-01-21 14:22:52.240 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (44ms).
2025-01-21 14:22:52.261 +03:00 [DBG] Executing DbCommand [Parameters=[@__model_Id_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId"
FROM "Users" AS u
WHERE u."Id" = @__model_Id_0
LIMIT 1
2025-01-21 14:22:52.443 +03:00 [INF] Executed DbCommand (186ms) [Parameters=[@__model_Id_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId"
FROM "Users" AS u
WHERE u."Id" = @__model_Id_0
LIMIT 1
2025-01-21 14:22:52.528 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'User' entity with key '{Id: 7}'.
2025-01-21 14:22:52.562 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:52.584 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 129ms reading results.
2025-01-21 14:22:52.595 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:52.604 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (8ms).
2025-01-21 14:22:53.123 +03:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.Id == __user_RoleId_0)'
2025-01-21 14:22:53.136 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Role>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.Name (string) Required, 1] }
            SELECT TOP(1) r.Id, r.Name
            FROM Roles AS r
            WHERE r.Id == @__user_RoleId_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.Name (string) Required, 1] }
            SELECT TOP(1) r.Id, r.Name
            FROM Roles AS r
            WHERE r.Id == @__user_RoleId_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Role instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Role);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Role)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Name>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: LibraryManagementInfrastructure.LibraryDBContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-01-21 14:22:53.177 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:53.178 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:53.179 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 14:22:53.179 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 14:22:53.179 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 14:22:53.179 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_RoleId_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name"
FROM "Roles" AS r
WHERE r."Id" = @__user_RoleId_0
LIMIT 1
2025-01-21 14:22:53.221 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__user_RoleId_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name"
FROM "Roles" AS r
WHERE r."Id" = @__user_RoleId_0
LIMIT 1
2025-01-21 14:22:53.233 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Role' entity with key '{Id: 7}'.
2025-01-21 14:22:53.245 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:53.245 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 23ms reading results.
2025-01-21 14:22:53.245 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:53.245 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 14:22:53.253 +03:00 [DBG] Compiling query expression: 
'DbSet<RolePermission>()
    .Where(rp => rp.RoleId == __role_Id_0)
    .Select(rp => rp.Permission)'
2025-01-21 14:22:53.266 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Permission
        FROM RolePermissions AS r
        WHERE r.RoleId == @__role_Id_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Permission
        FROM RolePermissions AS r
        WHERE r.RoleId == @__role_Id_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.GetString(0);
        return value1;
    }, 
    contextType: LibraryManagementInfrastructure.LibraryDBContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-01-21 14:22:53.268 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:53.268 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:53.269 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 14:22:53.269 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 14:22:53.269 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 14:22:53.269 +03:00 [DBG] Executing DbCommand [Parameters=[@__role_Id_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Permission"
FROM "RolePermissions" AS r
WHERE r."RoleId" = @__role_Id_0
2025-01-21 14:22:53.274 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__role_Id_0='7'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Permission"
FROM "RolePermissions" AS r
WHERE r."RoleId" = @__role_Id_0
2025-01-21 14:22:53.276 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:53.277 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2025-01-21 14:22:53.277 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:53.277 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 14:22:53.399 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 14:22:53.402 +03:00 [DBG] No information found on request to perform content negotiation.
2025-01-21 14:22:53.403 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 14:22:53.403 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 14:22:53.404 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 14:22:53.405 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-21 14:22:53.433 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI) in 10542.008ms
2025-01-21 14:22:53.434 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)'
2025-01-21 14:22:53.441 +03:00 [INF] HTTP POST /api/RoleManagegement/login responded 200 in 12072.3129 ms
2025-01-21 14:22:53.447 +03:00 [DBG] Connection ID "18230571331055779842" disconnecting.
2025-01-21 14:22:53.451 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 14:22:53.458 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:22:53.461 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (3ms).
2025-01-21 14:22:53.465 +03:00 [INF] Request finished HTTP/2 POST https://localhost:44328/api/RoleManagegement/login - 200 null application/json; charset=utf-8 12347.7574ms
2025-01-21 14:23:26.962 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/api/Authors - null null
2025-01-21 14:23:26.969 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Authors'
2025-01-21 14:23:26.969 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)' with route pattern 'api/Authors' is valid for the request path '/api/Authors'
2025-01-21 14:23:26.972 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 14:23:26.983 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 14:23:27.113 +03:00 [DBG] Successfully validated the token.
2025-01-21 14:23:27.115 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-01-21 14:23:27.136 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 14:23:27.143 +03:00 [INF] Route matched with {action = "GetAuthors", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[LibraryManagementDomain.DTO.AuthorDTO]]] GetAuthors() on controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI).
2025-01-21 14:23:27.143 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["LibraryManagementApplication.Authorization.AuthorizeRoleOrPermissionAttribute"]
2025-01-21 14:23:27.143 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 14:23:27.143 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 14:23:27.143 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 14:23:27.143 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 14:23:27.146 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 14:23:27.213 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 14:23:27.216 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 14:23:27.219 +03:00 [INF] This is a logger test
2025-01-21 14:23:27.228 +03:00 [DBG] Compiling query expression: 
'DbSet<Author>()'
2025-01-21 14:23:27.244 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Author>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Author.AuthorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Author.AuthorAge (int) Required, 1], [Property: Author.AuthorType (short) Required, 2], [Property: Author.Name (string) Required MaxLength(100), 3] }
        SELECT a.AuthorId, a.AuthorAge, a.AuthorType, a.Name
        FROM Authors AS a) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Author.AuthorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Author.AuthorAge (int) Required, 1], [Property: Author.AuthorType (short) Required, 2], [Property: Author.Name (string) Required MaxLength(100), 3] }
        SELECT a.AuthorId, a.AuthorAge, a.AuthorType, a.Name
        FROM Authors AS a, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Author entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Author instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Author);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Author.AuthorId PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Author)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")]: 
                        {
                            return 
                            {
                                Author instance;
                                instance = new Author();
                                instance.<AuthorId>k__BackingField = dataReader.GetInt32(0);
                                instance.<AuthorAge>k__BackingField = dataReader.GetInt32(1);
                                instance.<AuthorType>k__BackingField = Invoke(((CastingConverter<short, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Author.AuthorType (short) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author").FindProperty("AuthorType")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(2));
                                instance.<Name>k__BackingField = dataReader.GetString(3);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Author)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: LibraryManagementInfrastructure.LibraryDBContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-01-21 14:23:27.249 +03:00 [DBG] Creating DbConnection.
2025-01-21 14:23:27.249 +03:00 [DBG] Created DbConnection. (0ms).
2025-01-21 14:23:27.250 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:23:27.250 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:23:27.250 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 14:23:27.250 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 14:23:27.250 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 14:23:27.250 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 14:23:27.265 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 14:23:27.280 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Author' entity with key '{AuthorId: 1}'.
2025-01-21 14:23:27.292 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:23:27.292 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 26ms reading results.
2025-01-21 14:23:27.293 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:23:27.293 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 14:23:27.297 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 14:23:27.299 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-01-21 14:23:27.300 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-01-21 14:23:27.301 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 14:23:27.301 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 14:23:27.301 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 14:23:27.301 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[LibraryManagementDomain.Entities.Author, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[LibraryManagementDomain.DTO.AuthorDTO, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 14:23:27.317 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI) in 173.7013ms
2025-01-21 14:23:27.317 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 14:23:27.317 +03:00 [INF] HTTP GET /api/Authors responded 200 in 333.8558 ms
2025-01-21 14:23:27.318 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 14:23:27.318 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 14:23:27.319 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 14:23:27.319 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/api/Authors - 200 null application/json; charset=utf-8 356.9773ms
2025-01-21 14:23:27.328 +03:00 [DBG] Connection ID "18158513706953080839" disconnecting.
2025-01-21 14:24:49.973 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client ''
2025-01-21 14:25:01.506 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-01-21 14:25:01.574 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 15.3899ms - processed: 0 items - remaining: 1 items
2025-01-21 15:05:34.307 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-01-21 15:05:34.575 +03:00 [DBG] Hosting starting
2025-01-21 15:05:34.658 +03:00 [INF] User profile is available. Using 'C:\Users\rashe\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-21 15:05:34.695 +03:00 [DBG] Reading data from file 'C:\Users\rashe\AppData\Local\ASP.NET\DataProtection-Keys\key-34f2e68a-4570-439a-8454-209f4db72d73.xml'.
2025-01-21 15:05:34.748 +03:00 [DBG] Found key {34f2e68a-4570-439a-8454-209f4db72d73}.
2025-01-21 15:05:34.784 +03:00 [DBG] Considering key {34f2e68a-4570-439a-8454-209f4db72d73} with expiration date 2025-04-13 07:54:25Z as default key.
2025-01-21 15:05:34.788 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-01-21 15:05:34.792 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-01-21 15:05:34.795 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-01-21 15:05:34.805 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-01-21 15:05:34.807 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-01-21 15:05:34.809 +03:00 [DBG] Using key {34f2e68a-4570-439a-8454-209f4db72d73} as the default key.
2025-01-21 15:05:34.811 +03:00 [DBG] Key ring with default key {34f2e68a-4570-439a-8454-209f4db72d73} was loaded during application startup.
2025-01-21 15:05:35.159 +03:00 [DBG] Loaded hosting startup assembly LibraryManagementAPI
2025-01-21 15:05:35.162 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-01-21 15:05:35.162 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-01-21 15:05:35.163 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-01-21 15:05:35.315 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/swagger/index.html - null null
2025-01-21 15:05:35.551 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-21 15:05:35.552 +03:00 [INF] Hosting environment: Development
2025-01-21 15:05:35.552 +03:00 [INF] Content root path: C:\Users\rashe\OneDrive\Desktop\Codes\Library\Library
2025-01-21 15:05:35.552 +03:00 [DBG] Hosting started
2025-01-21 15:05:37.025 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-01-21 15:05:37.062 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-01-21 15:05:37.063 +03:00 [DBG] Request did not match any endpoints
2025-01-21 15:05:37.174 +03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-01-21 15:05:37.177 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-01-21 15:05:37.305 +03:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-01-21 15:05:37.306 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-01-21 15:05:37.309 +03:00 [DBG] Connection ID "18230571292401074183" disconnecting.
2025-01-21 15:05:37.313 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/swagger/index.html - 200 null text/html;charset=utf-8 2021.3595ms
2025-01-21 15:05:38.479 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/_vs/browserLink - null null
2025-01-21 15:05:38.479 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/_framework/aspnetcore-browser-refresh.js - null null
2025-01-21 15:05:38.495 +03:00 [DBG] Connection ID "18302628925093707794" disconnecting.
2025-01-21 15:05:38.498 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 6.863ms
2025-01-21 15:05:38.729 +03:00 [DBG] Connection ID "18374686514836668426" disconnecting.
2025-01-21 15:05:38.740 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/_vs/browserLink - 200 null text/javascript; charset=UTF-8 260.727ms
2025-01-21 15:05:39.024 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/swagger/v1/swagger.json - null null
2025-01-21 15:05:39.025 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-01-21 15:05:39.025 +03:00 [DBG] Request did not match any endpoints
2025-01-21 15:05:39.065 +03:00 [DBG] Connection ID "18302628929388675075" disconnecting.
2025-01-21 15:05:39.065 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 40.7473ms
2025-01-21 15:06:04.972 +03:00 [INF] Request starting HTTP/2 POST https://localhost:44328/api/RoleManagegement/add-role - application/json 7
2025-01-21 15:06:05.007 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoleManagegement/add-role'
2025-01-21 15:06:05.012 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.AddRole (LibraryManagementAPI)' with route pattern 'api/RoleManagegement/add-role' is valid for the request path '/api/RoleManagegement/add-role'
2025-01-21 15:06:05.013 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.AddRole (LibraryManagementAPI)'
2025-01-21 15:06:05.015 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 15:06:05.188 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-01-21 15:06:05.202 +03:00 [DBG] The request has an origin header: 'https://localhost:44328'.
2025-01-21 15:06:05.203 +03:00 [INF] CORS policy execution successful.
2025-01-21 15:06:05.210 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.AddRole (LibraryManagementAPI)'
2025-01-21 15:06:05.332 +03:00 [INF] Route matched with {action = "AddRole", controller = "RoleManagegement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddRole(System.String) on controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI).
2025-01-21 15:06:05.336 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-01-21 15:06:05.336 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 15:06:05.336 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 15:06:05.336 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 15:06:05.337 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 15:06:05.341 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 15:06:05.834 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-01-21 15:06:07.502 +03:00 [DBG] The index {'CourseId'} was not created on entity type 'StudentCourse (Dictionary<string, object>)' as the properties are already covered by the index {'CourseId', 'StudentId'}.
2025-01-21 15:06:07.830 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-01-21 15:06:08.257 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 15:06:08.275 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 15:06:08.286 +03:00 [DBG] Attempting to bind parameter 'roleName' of type 'System.String' ...
2025-01-21 15:06:08.291 +03:00 [DBG] Attempting to bind parameter 'roleName' of type 'System.String' using the name '' in request data ...
2025-01-21 15:06:08.294 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-01-21 15:06:08.323 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'System.String'
2025-01-21 15:06:08.324 +03:00 [DBG] Done attempting to bind parameter 'roleName' of type 'System.String'.
2025-01-21 15:06:08.324 +03:00 [DBG] Done attempting to bind parameter 'roleName' of type 'System.String'.
2025-01-21 15:06:08.325 +03:00 [DBG] Attempting to validate the bound parameter 'roleName' of type 'System.String' ...
2025-01-21 15:06:08.339 +03:00 [DBG] Done attempting to validate the bound parameter 'roleName' of type 'System.String'.
2025-01-21 15:06:08.541 +03:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .Any(r => r.Name == __roleName_0)'
2025-01-21 15:06:09.212 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Roles AS r
                WHERE r.Name == @__roleName_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Roles AS r
                WHERE r.Name == @__roleName_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: LibraryManagementInfrastructure.LibraryDBContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-01-21 15:06:09.330 +03:00 [DBG] Creating DbConnection.
2025-01-21 15:06:09.454 +03:00 [DBG] Created DbConnection. (123ms).
2025-01-21 15:06:09.469 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:10.050 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:10.064 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:06:10.094 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (19ms).
2025-01-21 15:06:10.119 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (57ms).
2025-01-21 15:06:10.143 +03:00 [DBG] Executing DbCommand [Parameters=[@__roleName_0='Admin'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Name" = @__roleName_0)
2025-01-21 15:06:10.382 +03:00 [INF] Executed DbCommand (239ms) [Parameters=[@__roleName_0='Admin'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r
    WHERE r."Name" = @__roleName_0)
2025-01-21 15:06:10.453 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:10.469 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 76ms reading results.
2025-01-21 15:06:10.476 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:10.481 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (6ms).
2025-01-21 15:06:10.488 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 15:06:10.491 +03:00 [DBG] No information found on request to perform content negotiation.
2025-01-21 15:06:10.491 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 15:06:10.491 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 15:06:10.493 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-01-21 15:06:10.493 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-01-21 15:06:10.505 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.RoleManagegementController.AddRole (LibraryManagementAPI) in 5163.4316ms
2025-01-21 15:06:10.506 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.AddRole (LibraryManagementAPI)'
2025-01-21 15:06:10.512 +03:00 [INF] HTTP POST /api/RoleManagegement/add-role responded 400 in 5492.4512 ms
2025-01-21 15:06:10.522 +03:00 [DBG] Connection ID "18302628929388675077" disconnecting.
2025-01-21 15:06:10.524 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 15:06:10.528 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:10.530 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (1ms).
2025-01-21 15:06:10.532 +03:00 [INF] Request finished HTTP/2 POST https://localhost:44328/api/RoleManagegement/add-role - 400 null text/plain; charset=utf-8 5559.9477ms
2025-01-21 15:06:17.950 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/api/RoleManagegement/get-roles - null null
2025-01-21 15:06:17.955 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoleManagegement/get-roles'
2025-01-21 15:06:17.955 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.GetRoles (LibraryManagementAPI)' with route pattern 'api/RoleManagegement/get-roles' is valid for the request path '/api/RoleManagegement/get-roles'
2025-01-21 15:06:17.955 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.GetRoles (LibraryManagementAPI)'
2025-01-21 15:06:17.957 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 15:06:17.959 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-01-21 15:06:17.960 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.GetRoles (LibraryManagementAPI)'
2025-01-21 15:06:17.968 +03:00 [INF] Route matched with {action = "GetRoles", controller = "RoleManagegement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoles() on controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI).
2025-01-21 15:06:17.969 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-01-21 15:06:17.969 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 15:06:17.969 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 15:06:17.969 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 15:06:17.969 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 15:06:17.969 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 15:06:18.122 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 15:06:18.124 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 15:06:18.154 +03:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .Select(r => new { 
        Id = r.Id, 
        Name = r.Name, 
        Permissions = DbSet<RolePermission>()
            .Where(rp => rp.RoleId == r.Id)
            .Select(rp => rp.Permission)
            .ToList()
     })'
2025-01-21 15:06:18.369 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<<>f__AnonymousType6<int, string, List<string>>>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
        SELECT r.Id, r.Name, r0.Permission, r0.Id
        FROM Roles AS r
        LEFT JOIN RolePermissions AS r0 ON r.Id == r0.RoleId
        ORDER BY r.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
        SELECT r.Id, r.Name, r0.Permission, r0.Id
        FROM Roles AS r
        LEFT JOIN RolePermissions AS r0 ON r.Id == r0.RoleId
        ORDER BY r.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            int? value1;
            string value2;
            List<string> namelessParameter{0};
            value1 = (int?)dataReader.GetInt32(0);
            value2 = dataReader.GetString(1);
            namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<string, List<string>>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: (queryContext, dataReader) => new object[]{ (object)(int?)dataReader.GetInt32(0) }, 
                outerIdentifier: (queryContext, dataReader) => new object[]{ (object)(int?)dataReader.GetInt32(0) }, 
                clrCollectionAccessor: default(IClrCollectionAccessor));
            return resultContext.Values = new object[]
            { 
                (object)value1, 
                value2, 
                namelessParameter{0} 
            };
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateCollection<List<string>, string, string>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: (queryContext, dataReader) => new object[]{ (object)(int?)dataReader.GetInt32(0) }, 
            outerIdentifier: (queryContext, dataReader) => new object[]{ (object)(int?)dataReader.GetInt32(0) }, 
            selfIdentifier: (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(3) ? default(int?) : (int?)dataReader.GetInt32(3) }, 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && Invoke((v1, v2) => v1 == v2, (int)left, (int)right) }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && Invoke((v1, v2) => v1 == v2, (int)left, (int)right) }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && Invoke((v1, v2) => v1 == v2, (int)left, (int)right) }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                string value1;
                value1 = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                return value1;
            });
        return IsTrue(resultCoordinator.ResultReady)
         ? new { 
            Id = (int)(int?)(resultContext.Values[0]), 
            Name = (string)(resultContext.Values[1]), 
            Permissions = (List<string>)(resultContext.Values[2])
         } : default(<>f__AnonymousType6<int, string, List<string>>);
    }, 
    contextType: LibraryManagementInfrastructure.LibraryDBContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-01-21 15:06:24.807 +03:00 [DBG] Creating DbConnection.
2025-01-21 15:06:24.808 +03:00 [DBG] Created DbConnection. (0ms).
2025-01-21 15:06:24.809 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:24.813 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:24.813 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:06:24.813 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:06:24.813 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:06:24.814 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r0."Permission", r0."Id"
FROM "Roles" AS r
LEFT JOIN "RolePermissions" AS r0 ON r."Id" = r0."RoleId"
ORDER BY r."Id"
2025-01-21 15:06:24.855 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r0."Permission", r0."Id"
FROM "Roles" AS r
LEFT JOIN "RolePermissions" AS r0 ON r."Id" = r0."RoleId"
ORDER BY r."Id"
2025-01-21 15:06:24.885 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:24.885 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 30ms reading results.
2025-01-21 15:06:24.886 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:24.886 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:06:24.888 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 15:06:24.888 +03:00 [DBG] No information found on request to perform content negotiation.
2025-01-21 15:06:24.888 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 15:06:24.888 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 15:06:24.889 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 15:06:24.889 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType6`3[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], LibraryManagementAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 15:06:24.921 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.RoleManagegementController.GetRoles (LibraryManagementAPI) in 6951.9856ms
2025-01-21 15:06:24.922 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.GetRoles (LibraryManagementAPI)'
2025-01-21 15:06:24.922 +03:00 [INF] HTTP GET /api/RoleManagegement/get-roles responded 200 in 6964.8332 ms
2025-01-21 15:06:24.923 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 15:06:24.923 +03:00 [DBG] Connection ID "18374686501951766551" disconnecting.
2025-01-21 15:06:24.925 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:24.926 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (2ms).
2025-01-21 15:06:24.927 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/api/RoleManagegement/get-roles - 200 null application/json; charset=utf-8 6977.0792ms
2025-01-21 15:06:47.328 +03:00 [INF] Request starting HTTP/2 POST https://localhost:44328/api/RoleManagegement/register - application/json 43
2025-01-21 15:06:47.329 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoleManagegement/register'
2025-01-21 15:06:47.329 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Register (LibraryManagementAPI)' with route pattern 'api/RoleManagegement/register' is valid for the request path '/api/RoleManagegement/register'
2025-01-21 15:06:47.330 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Register (LibraryManagementAPI)'
2025-01-21 15:06:47.330 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 15:06:47.336 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-01-21 15:06:47.337 +03:00 [DBG] The request has an origin header: 'https://localhost:44328'.
2025-01-21 15:06:47.337 +03:00 [INF] CORS policy execution successful.
2025-01-21 15:06:47.337 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Register (LibraryManagementAPI)'
2025-01-21 15:06:47.346 +03:00 [INF] Route matched with {action = "Register", controller = "RoleManagegement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(LibraryManagementDomain.Models.RegisterModel) on controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI).
2025-01-21 15:06:47.346 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-01-21 15:06:47.346 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 15:06:47.347 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 15:06:47.347 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 15:06:47.347 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 15:06:47.347 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 15:06:47.369 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 15:06:47.372 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 15:06:47.374 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.RegisterModel' ...
2025-01-21 15:06:47.375 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.RegisterModel' using the name '' in request data ...
2025-01-21 15:06:47.375 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-01-21 15:06:47.401 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'LibraryManagementDomain.Models.RegisterModel'
2025-01-21 15:06:47.401 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.RegisterModel'.
2025-01-21 15:06:47.401 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.RegisterModel'.
2025-01-21 15:06:47.401 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.RegisterModel' ...
2025-01-21 15:06:47.413 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.RegisterModel'.
2025-01-21 15:06:47.474 +03:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.Id == __model_RoleId_0)'
2025-01-21 15:06:47.566 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Role>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.Name (string) Required, 1] }
            SELECT TOP(1) r.Id, r.Name
            FROM Roles AS r
            WHERE r.Id == @__model_RoleId_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.Name (string) Required, 1] }
            SELECT TOP(1) r.Id, r.Name
            FROM Roles AS r
            WHERE r.Id == @__model_RoleId_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Role instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Role);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Role)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Name>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: LibraryManagementInfrastructure.LibraryDBContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-01-21 15:06:47.573 +03:00 [DBG] Creating DbConnection.
2025-01-21 15:06:47.573 +03:00 [DBG] Created DbConnection. (0ms).
2025-01-21 15:06:47.573 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:47.574 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:47.574 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:06:47.574 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:06:47.574 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:06:47.574 +03:00 [DBG] Executing DbCommand [Parameters=[@__model_RoleId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name"
FROM "Roles" AS r
WHERE r."Id" = @__model_RoleId_0
LIMIT 1
2025-01-21 15:06:47.611 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__model_RoleId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name"
FROM "Roles" AS r
WHERE r."Id" = @__model_RoleId_0
LIMIT 1
2025-01-21 15:06:47.680 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Role' entity with key '{Id: 1}'.
2025-01-21 15:06:47.729 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:47.730 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 118ms reading results.
2025-01-21 15:06:47.731 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:47.731 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:06:48.380 +03:00 [DBG] 'LibraryDBContext' generated temporary value '-2147482647' for the property 'User.Id'.
2025-01-21 15:06:48.395 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'User' entity with key '{Id: -2147482647}'.
2025-01-21 15:06:48.398 +03:00 [DBG] SaveChanges starting for 'LibraryDBContext'.
2025-01-21 15:06:48.402 +03:00 [DBG] DetectChanges starting for 'LibraryDBContext'.
2025-01-21 15:06:48.410 +03:00 [DBG] DetectChanges completed for 'LibraryDBContext'.
2025-01-21 15:06:48.461 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:48.461 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:48.463 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:06:48.463 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:06:48.463 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:06:48.463 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='$2a$11$G2.sPIXiomgqvQZWT9Gabu1Xn3jII7JhJ7oesee6icD1ky1ibiYaO' (Nullable = false), @p1='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId")
VALUES (@p0, @p1)
RETURNING "Id";
2025-01-21 15:06:48.511 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@p0='$2a$11$G2.sPIXiomgqvQZWT9Gabu1Xn3jII7JhJ7oesee6icD1ky1ibiYaO' (Nullable = false), @p1='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId")
VALUES (@p0, @p1)
RETURNING "Id";
2025-01-21 15:06:48.526 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed from '-2147482647' to '8' for entity with key '{Id: 8}'.
2025-01-21 15:06:48.535 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:48.535 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 23ms reading results.
2025-01-21 15:06:48.536 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:48.536 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:06:48.548 +03:00 [DBG] The 'User' entity with key '{Id: 8}' tracked by 'LibraryDBContext' changed state from '"Added"' to '"Unchanged"'.
2025-01-21 15:06:48.552 +03:00 [DBG] SaveChanges completed for 'LibraryDBContext' with 1 entities written to the database.
2025-01-21 15:06:48.554 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 15:06:48.554 +03:00 [DBG] No information found on request to perform content negotiation.
2025-01-21 15:06:48.554 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 15:06:48.554 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 15:06:48.554 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 15:06:48.554 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-21 15:06:48.559 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.RoleManagegementController.Register (LibraryManagementAPI) in 1211.6888ms
2025-01-21 15:06:48.559 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Register (LibraryManagementAPI)'
2025-01-21 15:06:48.559 +03:00 [INF] HTTP POST /api/RoleManagegement/register responded 200 in 1228.7563 ms
2025-01-21 15:06:48.559 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 15:06:48.559 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:06:48.559 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:06:48.560 +03:00 [INF] Request finished HTTP/2 POST https://localhost:44328/api/RoleManagegement/register - 200 null application/json; charset=utf-8 1231.9238ms
2025-01-21 15:06:48.564 +03:00 [DBG] Connection ID "18086456108620185602" disconnecting.
2025-01-21 15:07:00.379 +03:00 [INF] Request starting HTTP/2 POST https://localhost:44328/api/RoleManagegement/login - application/json 39
2025-01-21 15:07:00.380 +03:00 [DBG] 1 candidate(s) found for the request path '/api/RoleManagegement/login'
2025-01-21 15:07:00.381 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)' with route pattern 'api/RoleManagegement/login' is valid for the request path '/api/RoleManagegement/login'
2025-01-21 15:07:00.382 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)'
2025-01-21 15:07:00.382 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 15:07:00.382 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-01-21 15:07:00.382 +03:00 [DBG] The request has an origin header: 'https://localhost:44328'.
2025-01-21 15:07:00.382 +03:00 [INF] CORS policy execution successful.
2025-01-21 15:07:00.382 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)'
2025-01-21 15:07:00.388 +03:00 [INF] Route matched with {action = "Login", controller = "RoleManagegement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LibraryManagementDomain.Models.LoginModel) on controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI).
2025-01-21 15:07:00.388 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-01-21 15:07:00.388 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 15:07:00.388 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 15:07:00.388 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 15:07:00.388 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 15:07:00.388 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 15:07:00.390 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 15:07:00.391 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.RoleManagegementController (LibraryManagementAPI)
2025-01-21 15:07:00.392 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel' ...
2025-01-21 15:07:00.392 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel' using the name '' in request data ...
2025-01-21 15:07:00.392 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-01-21 15:07:00.396 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'LibraryManagementDomain.Models.LoginModel'
2025-01-21 15:07:00.396 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel'.
2025-01-21 15:07:00.396 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel'.
2025-01-21 15:07:00.396 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel' ...
2025-01-21 15:07:00.400 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.LoginModel'.
2025-01-21 15:07:00.410 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __model_Id_0)'
2025-01-21 15:07:00.423 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.PasswordHash (string) Required, 1], [Property: User.RoleId (int) Required, 2] }
            SELECT TOP(1) u.Id, u.PasswordHash, u.RoleId
            FROM Users AS u
            WHERE u.Id == @__model_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.PasswordHash (string) Required, 1], [Property: User.RoleId (int) Required, 2] }
            SELECT TOP(1) u.Id, u.PasswordHash, u.RoleId
            FROM Users AS u
            WHERE u.Id == @__model_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(1);
                                    instance.<RoleId>k__BackingField = dataReader.GetInt32(2);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: LibraryManagementInfrastructure.LibraryDBContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-01-21 15:07:00.436 +03:00 [DBG] Creating DbConnection.
2025-01-21 15:07:00.437 +03:00 [DBG] Created DbConnection. (0ms).
2025-01-21 15:07:00.437 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.438 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.439 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:07:00.439 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:07:00.440 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:07:00.440 +03:00 [DBG] Executing DbCommand [Parameters=[@__model_Id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId"
FROM "Users" AS u
WHERE u."Id" = @__model_Id_0
LIMIT 1
2025-01-21 15:07:00.490 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__model_Id_0='8'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId"
FROM "Users" AS u
WHERE u."Id" = @__model_Id_0
LIMIT 1
2025-01-21 15:07:00.513 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'User' entity with key '{Id: 8}'.
2025-01-21 15:07:00.530 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.543 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 49ms reading results.
2025-01-21 15:07:00.543 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.544 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:07:00.780 +03:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.Id == __user_RoleId_0)'
2025-01-21 15:07:00.785 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Role>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.Name (string) Required, 1] }
            SELECT TOP(1) r.Id, r.Name
            FROM Roles AS r
            WHERE r.Id == @__user_RoleId_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.Name (string) Required, 1] }
            SELECT TOP(1) r.Id, r.Name
            FROM Roles AS r
            WHERE r.Id == @__user_RoleId_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Role entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Role instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Role);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Role.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Role)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")]: 
                            {
                                return 
                                {
                                    Role instance;
                                    instance = new Role();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Name>k__BackingField = dataReader.GetString(1);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Role | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Role")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Role)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: LibraryManagementInfrastructure.LibraryDBContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-01-21 15:07:00.789 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.790 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.790 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:07:00.790 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:07:00.790 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:07:00.790 +03:00 [DBG] Executing DbCommand [Parameters=[@__user_RoleId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name"
FROM "Roles" AS r
WHERE r."Id" = @__user_RoleId_0
LIMIT 1
2025-01-21 15:07:00.795 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_RoleId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name"
FROM "Roles" AS r
WHERE r."Id" = @__user_RoleId_0
LIMIT 1
2025-01-21 15:07:00.795 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Role' entity with key '{Id: 1}'.
2025-01-21 15:07:00.798 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.798 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 3ms reading results.
2025-01-21 15:07:00.798 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.798 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:07:00.801 +03:00 [DBG] Compiling query expression: 
'DbSet<RolePermission>()
    .Where(rp => rp.RoleId == __role_Id_0)
    .Select(rp => rp.Permission)'
2025-01-21 15:07:00.804 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Permission
        FROM RolePermissions AS r
        WHERE r.RoleId == @__role_Id_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Permission
        FROM RolePermissions AS r
        WHERE r.RoleId == @__role_Id_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.GetString(0);
        return value1;
    }, 
    contextType: LibraryManagementInfrastructure.LibraryDBContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-01-21 15:07:00.807 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.807 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.807 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:07:00.807 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:07:00.807 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:07:00.807 +03:00 [DBG] Executing DbCommand [Parameters=[@__role_Id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Permission"
FROM "RolePermissions" AS r
WHERE r."RoleId" = @__role_Id_0
2025-01-21 15:07:00.813 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__role_Id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Permission"
FROM "RolePermissions" AS r
WHERE r."RoleId" = @__role_Id_0
2025-01-21 15:07:00.814 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.814 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2025-01-21 15:07:00.814 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.814 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:07:00.960 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 15:07:00.960 +03:00 [DBG] No information found on request to perform content negotiation.
2025-01-21 15:07:00.960 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 15:07:00.960 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 15:07:00.960 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 15:07:00.961 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-21 15:07:00.964 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI) in 576.2074ms
2025-01-21 15:07:00.965 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.RoleManagegementController.Login (LibraryManagementAPI)'
2025-01-21 15:07:00.965 +03:00 [INF] HTTP POST /api/RoleManagegement/login responded 200 in 582.7265 ms
2025-01-21 15:07:00.965 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 15:07:00.965 +03:00 [DBG] Connection ID "18302628912208805915" disconnecting.
2025-01-21 15:07:00.965 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:00.966 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:07:00.967 +03:00 [INF] Request finished HTTP/2 POST https://localhost:44328/api/RoleManagegement/login - 200 null application/json; charset=utf-8 586.8694ms
2025-01-21 15:07:32.367 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/api/Authors - null null
2025-01-21 15:07:32.370 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Authors'
2025-01-21 15:07:32.371 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)' with route pattern 'api/Authors' is valid for the request path '/api/Authors'
2025-01-21 15:07:32.373 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 15:07:32.375 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 15:07:32.519 +03:00 [DBG] Successfully validated the token.
2025-01-21 15:07:32.530 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-01-21 15:07:32.602 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 15:07:32.620 +03:00 [INF] Route matched with {action = "GetAuthors", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[LibraryManagementDomain.DTO.AuthorDTO]]] GetAuthors() on controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI).
2025-01-21 15:07:32.621 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["LibraryManagementApplication.Authorization.AuthorizeRoleOrPermissionAttribute"]
2025-01-21 15:07:32.622 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 15:07:32.622 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 15:07:32.622 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 15:07:32.623 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 15:07:32.628 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 15:07:32.634 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 15:07:32.694 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 15:07:32.704 +03:00 [INF] Logger:Fetching Authors
2025-01-21 15:07:32.731 +03:00 [DBG] Compiling query expression: 
'DbSet<Author>()'
2025-01-21 15:07:32.752 +03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Author>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Author.AuthorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Author.AuthorAge (int) Required, 1], [Property: Author.AuthorType (short) Required, 2], [Property: Author.Name (string) Required MaxLength(100), 3] }
        SELECT a.AuthorId, a.AuthorAge, a.AuthorType, a.Name
        FROM Authors AS a) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Author.AuthorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Author.AuthorAge (int) Required, 1], [Property: Author.AuthorType (short) Required, 2], [Property: Author.Name (string) Required MaxLength(100), 3] }
        SELECT a.AuthorId, a.AuthorAge, a.AuthorType, a.Name
        FROM Authors AS a, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Author entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Author instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Author);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Author.AuthorId PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Author)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")]: 
                        {
                            return 
                            {
                                Author instance;
                                instance = new Author();
                                instance.<AuthorId>k__BackingField = dataReader.GetInt32(0);
                                instance.<AuthorAge>k__BackingField = dataReader.GetInt32(1);
                                instance.<AuthorType>k__BackingField = Invoke(((CastingConverter<short, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Author.AuthorType (short) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author").FindProperty("AuthorType")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(2));
                                instance.<Name>k__BackingField = dataReader.GetString(3);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Author)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: LibraryManagementInfrastructure.LibraryDBContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-01-21 15:07:32.759 +03:00 [DBG] Creating DbConnection.
2025-01-21 15:07:32.759 +03:00 [DBG] Created DbConnection. (0ms).
2025-01-21 15:07:32.759 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:32.761 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:32.762 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:07:32.762 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:07:32.762 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:07:32.762 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 15:07:32.782 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 15:07:32.795 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Author' entity with key '{AuthorId: 1}'.
2025-01-21 15:07:32.807 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:32.808 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 25ms reading results.
2025-01-21 15:07:32.808 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:32.808 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:07:32.811 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 15:07:32.816 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-01-21 15:07:32.817 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-01-21 15:07:32.817 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 15:07:32.817 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 15:07:32.817 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 15:07:32.817 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[LibraryManagementDomain.Entities.Author, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[LibraryManagementDomain.DTO.AuthorDTO, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 15:07:32.828 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI) in 204.7991ms
2025-01-21 15:07:32.828 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 15:07:32.828 +03:00 [INF] HTTP GET /api/Authors responded 200 in 452.3241 ms
2025-01-21 15:07:32.828 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 15:07:32.828 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:32.829 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:07:32.829 +03:00 [DBG] Connection ID "18374686506246733841" disconnecting.
2025-01-21 15:07:32.829 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/api/Authors - 200 null application/json; charset=utf-8 463.0377ms
2025-01-21 15:07:54.566 +03:00 [INF] Request starting HTTP/2 POST https://localhost:44328/api/Authors - application/json 58
2025-01-21 15:07:54.566 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Authors'
2025-01-21 15:07:54.567 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.AuthorsController.AddAuthor (LibraryManagementAPI)' with route pattern 'api/Authors' is valid for the request path '/api/Authors'
2025-01-21 15:07:54.568 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.AuthorsController.AddAuthor (LibraryManagementAPI)'
2025-01-21 15:07:54.568 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 15:07:54.569 +03:00 [DBG] Successfully validated the token.
2025-01-21 15:07:54.569 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-01-21 15:07:54.570 +03:00 [DBG] The request has an origin header: 'https://localhost:44328'.
2025-01-21 15:07:54.570 +03:00 [INF] CORS policy execution successful.
2025-01-21 15:07:54.570 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.AuthorsController.AddAuthor (LibraryManagementAPI)'
2025-01-21 15:07:54.580 +03:00 [INF] Route matched with {action = "AddAuthor", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddAuthor(LibraryManagementDomain.Models.AuthorModel) on controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI).
2025-01-21 15:07:54.580 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["LibraryManagementApplication.Authorization.AuthorizeRoleOrPermissionAttribute"]
2025-01-21 15:07:54.580 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 15:07:54.580 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 15:07:54.580 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 15:07:54.580 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 15:07:54.581 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 15:07:54.582 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 15:07:54.583 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 15:07:54.583 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.AuthorModel' ...
2025-01-21 15:07:54.584 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.AuthorModel' using the name '' in request data ...
2025-01-21 15:07:54.584 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-01-21 15:07:54.593 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'LibraryManagementDomain.Models.AuthorModel'
2025-01-21 15:07:54.593 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.AuthorModel'.
2025-01-21 15:07:54.593 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.AuthorModel'.
2025-01-21 15:07:54.593 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.AuthorModel' ...
2025-01-21 15:07:54.609 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.AuthorModel'.
2025-01-21 15:07:55.654 +03:00 [DBG] Creating DbConnection.
2025-01-21 15:07:55.654 +03:00 [DBG] Created DbConnection. (0ms).
2025-01-21 15:07:55.654 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:55.654 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:55.661 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-01-21 15:07:55.678 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-01-21 15:07:55.717 +03:00 [DBG] 'LibraryDBContext' generated temporary value '-2147482647' for the property 'Author.AuthorId'.
2025-01-21 15:07:55.721 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Author' entity with key '{AuthorId: -2147482647}'.
2025-01-21 15:07:57.536 +03:00 [DBG] SaveChanges starting for 'LibraryDBContext'.
2025-01-21 15:07:57.537 +03:00 [DBG] DetectChanges starting for 'LibraryDBContext'.
2025-01-21 15:07:57.552 +03:00 [DBG] DetectChanges completed for 'LibraryDBContext'.
2025-01-21 15:07:57.733 +03:00 [DBG] Creating transaction savepoint.
2025-01-21 15:07:57.829 +03:00 [DBG] Created transaction savepoint.
2025-01-21 15:07:57.830 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:07:57.831 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:07:57.849 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2025-01-21 15:07:57.849 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='34', @p1='1', @p2='Zaid' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Authors" ("AuthorAge", "AuthorType", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "AuthorId";
2025-01-21 15:07:57.904 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@p0='34', @p1='1', @p2='Zaid' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Authors" ("AuthorAge", "AuthorType", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "AuthorId";
2025-01-21 15:07:57.913 +03:00 [DBG] The foreign key property 'Author.AuthorId' was detected as changed from '-2147482647' to '3' for entity with key '{AuthorId: 3}'.
2025-01-21 15:07:57.918 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:57.920 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 13ms reading results.
2025-01-21 15:07:57.932 +03:00 [DBG] Releasing transaction savepoint.
2025-01-21 15:07:57.954 +03:00 [DBG] Released transaction savepoint.
2025-01-21 15:07:57.960 +03:00 [DBG] The 'Author' entity with key '{AuthorId: 3}' tracked by 'LibraryDBContext' changed state from '"Added"' to '"Unchanged"'.
2025-01-21 15:07:57.960 +03:00 [DBG] SaveChanges completed for 'LibraryDBContext' with 1 entities written to the database.
2025-01-21 15:07:57.966 +03:00 [DBG] Committing transaction.
2025-01-21 15:07:57.995 +03:00 [DBG] Committed transaction.
2025-01-21 15:07:58.002 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:58.004 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (1ms).
2025-01-21 15:07:58.083 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 15:07:58.083 +03:00 [DBG] No information found on request to perform content negotiation.
2025-01-21 15:07:58.084 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 15:07:58.084 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 15:07:58.084 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 15:07:58.084 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'LibraryManagementDomain.DTO.AuthorDTO'.
2025-01-21 15:07:58.193 +03:00 [DBG] Found the endpoints ["LibraryManagementAPI.Controllers.AuthorsController.AddAuthor (LibraryManagementAPI)"] for address (id=[0],action=[AddAuthor],controller=[Authors])
2025-01-21 15:07:58.215 +03:00 [DBG] Successfully processed template api/Authors for LibraryManagementAPI.Controllers.AuthorsController.AddAuthor (LibraryManagementAPI) resulting in /api/Authors and ?id=0
2025-01-21 15:07:58.225 +03:00 [DBG] Link generation succeeded for endpoints ["LibraryManagementAPI.Controllers.AuthorsController.AddAuthor (LibraryManagementAPI)"] with result /api/Authors?id=0
2025-01-21 15:07:58.229 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.AuthorsController.AddAuthor (LibraryManagementAPI) in 3648.3791ms
2025-01-21 15:07:58.229 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.AuthorsController.AddAuthor (LibraryManagementAPI)'
2025-01-21 15:07:58.229 +03:00 [INF] HTTP POST /api/Authors responded 201 in 3661.0008 ms
2025-01-21 15:07:58.230 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 15:07:58.230 +03:00 [DBG] Connection ID "18302628925093707796" disconnecting.
2025-01-21 15:07:58.230 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:07:58.231 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:07:58.232 +03:00 [INF] Request finished HTTP/2 POST https://localhost:44328/api/Authors - 201 null application/json; charset=utf-8 3666.2849ms
2025-01-21 15:08:06.147 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/api/Authors - null null
2025-01-21 15:08:06.148 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Authors'
2025-01-21 15:08:06.148 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)' with route pattern 'api/Authors' is valid for the request path '/api/Authors'
2025-01-21 15:08:06.148 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 15:08:06.148 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 15:08:06.149 +03:00 [DBG] Successfully validated the token.
2025-01-21 15:08:06.149 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-01-21 15:08:06.150 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 15:08:06.151 +03:00 [INF] Route matched with {action = "GetAuthors", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[LibraryManagementDomain.DTO.AuthorDTO]]] GetAuthors() on controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI).
2025-01-21 15:08:06.151 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["LibraryManagementApplication.Authorization.AuthorizeRoleOrPermissionAttribute"]
2025-01-21 15:08:06.151 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 15:08:06.152 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 15:08:06.152 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 15:08:06.152 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 15:08:06.152 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 15:08:06.153 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 15:08:06.153 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 15:08:06.154 +03:00 [INF] Logger:Fetching Authors
2025-01-21 15:08:06.155 +03:00 [DBG] Creating DbConnection.
2025-01-21 15:08:06.155 +03:00 [DBG] Created DbConnection. (0ms).
2025-01-21 15:08:06.155 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:06.155 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:06.155 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:08:06.155 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:08:06.155 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:08:06.156 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 15:08:06.160 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 15:08:06.162 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Author' entity with key '{AuthorId: 1}'.
2025-01-21 15:08:06.162 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Author' entity with key '{AuthorId: 3}'.
2025-01-21 15:08:06.162 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:06.162 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2025-01-21 15:08:06.162 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:06.163 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:08:06.163 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 15:08:06.163 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-01-21 15:08:06.163 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-01-21 15:08:06.163 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 15:08:06.163 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 15:08:06.163 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 15:08:06.163 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[LibraryManagementDomain.Entities.Author, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[LibraryManagementDomain.DTO.AuthorDTO, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 15:08:06.164 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI) in 12.2064ms
2025-01-21 15:08:06.164 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 15:08:06.164 +03:00 [INF] HTTP GET /api/Authors responded 200 in 16.4188 ms
2025-01-21 15:08:06.164 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 15:08:06.165 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:06.165 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:08:06.165 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/api/Authors - 200 null application/json; charset=utf-8 17.7823ms
2025-01-21 15:08:06.172 +03:00 [DBG] Connection ID "18302628916503773187" disconnecting.
2025-01-21 15:08:08.278 +03:00 [DBG] HttpMessageHandler expired after 120000ms for client ''
2025-01-21 15:08:18.287 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-01-21 15:08:18.296 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.1998ms - processed: 0 items - remaining: 1 items
2025-01-21 15:08:28.295 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-01-21 15:08:28.295 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.006ms - processed: 0 items - remaining: 1 items
2025-01-21 15:08:38.311 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-01-21 15:08:38.312 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0117ms - processed: 0 items - remaining: 1 items
2025-01-21 15:08:39.227 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:44328/api/Authors/3 - application/json 58
2025-01-21 15:08:39.229 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Authors/3'
2025-01-21 15:08:39.230 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.AuthorsController.UpdateAuthor (LibraryManagementAPI)' with route pattern 'api/Authors/{id}' is valid for the request path '/api/Authors/3'
2025-01-21 15:08:39.230 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.AuthorsController.UpdateAuthor (LibraryManagementAPI)'
2025-01-21 15:08:39.231 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 15:08:39.231 +03:00 [DBG] Successfully validated the token.
2025-01-21 15:08:39.231 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-01-21 15:08:39.233 +03:00 [DBG] The request has an origin header: 'https://localhost:44328'.
2025-01-21 15:08:39.233 +03:00 [INF] CORS policy execution successful.
2025-01-21 15:08:39.233 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.AuthorsController.UpdateAuthor (LibraryManagementAPI)'
2025-01-21 15:08:39.259 +03:00 [INF] Route matched with {action = "UpdateAuthor", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateAuthor(Int32, LibraryManagementDomain.Models.AuthorModel) on controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI).
2025-01-21 15:08:39.260 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["LibraryManagementApplication.Authorization.AuthorizeRoleOrPermissionAttribute"]
2025-01-21 15:08:39.260 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 15:08:39.260 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 15:08:39.260 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 15:08:39.260 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 15:08:39.260 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 15:08:39.262 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 15:08:39.268 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 15:08:39.271 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-01-21 15:08:39.272 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-01-21 15:08:39.277 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-01-21 15:08:39.277 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-01-21 15:08:39.277 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-01-21 15:08:39.278 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-01-21 15:08:39.278 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.AuthorModel' ...
2025-01-21 15:08:39.278 +03:00 [DBG] Attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.AuthorModel' using the name '' in request data ...
2025-01-21 15:08:39.279 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-01-21 15:08:39.284 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'LibraryManagementDomain.Models.AuthorModel'
2025-01-21 15:08:39.284 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.AuthorModel'.
2025-01-21 15:08:39.284 +03:00 [DBG] Done attempting to bind parameter 'model' of type 'LibraryManagementDomain.Models.AuthorModel'.
2025-01-21 15:08:39.284 +03:00 [DBG] Attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.AuthorModel' ...
2025-01-21 15:08:39.286 +03:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'LibraryManagementDomain.Models.AuthorModel'.
2025-01-21 15:08:39.306 +03:00 [DBG] Creating DbConnection.
2025-01-21 15:08:39.308 +03:00 [DBG] Created DbConnection. (1ms).
2025-01-21 15:08:39.308 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:39.308 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:39.319 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-01-21 15:08:39.320 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-01-21 15:08:39.397 +03:00 [DBG] Compiling query expression: 
'DbSet<Author>()
    .FirstOrDefault(e => EF.Property<int>(e, "AuthorId") == __p_0)'
2025-01-21 15:08:39.467 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Author>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Author>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Author.AuthorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Author.AuthorAge (int) Required, 1], [Property: Author.AuthorType (short) Required, 2], [Property: Author.Name (string) Required MaxLength(100), 3] }
            SELECT TOP(1) a.AuthorId, a.AuthorAge, a.AuthorType, a.Name
            FROM Authors AS a
            WHERE a.AuthorId == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Author.AuthorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Author.AuthorAge (int) Required, 1], [Property: Author.AuthorType (short) Required, 2], [Property: Author.Name (string) Required MaxLength(100), 3] }
            SELECT TOP(1) a.AuthorId, a.AuthorAge, a.AuthorType, a.Name
            FROM Authors AS a
            WHERE a.AuthorId == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Author entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Author instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Author);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Author.AuthorId PK | Resolver: c => c.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Author)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")]: 
                            {
                                return 
                                {
                                    Author instance;
                                    instance = new Author();
                                    instance.<AuthorId>k__BackingField = dataReader.GetInt32(0);
                                    instance.<AuthorAge>k__BackingField = dataReader.GetInt32(1);
                                    instance.<AuthorType>k__BackingField = Invoke(((CastingConverter<short, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Author.AuthorType (short) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author").FindProperty("AuthorType")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(2));
                                    instance.<Name>k__BackingField = dataReader.GetString(3);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Author | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("LibraryManagementDomain.Entities.Author")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Author)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: LibraryManagementInfrastructure.LibraryDBContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-01-21 15:08:39.478 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:08:39.479 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:08:39.479 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:08:39.480 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
WHERE a."AuthorId" = @__p_0
LIMIT 1
2025-01-21 15:08:39.535 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__p_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
WHERE a."AuthorId" = @__p_0
LIMIT 1
2025-01-21 15:08:39.537 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Author' entity with key '{AuthorId: 3}'.
2025-01-21 15:08:39.538 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:39.538 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2025-01-21 15:08:39.541 +03:00 [DBG] The 'Author' entity with key '{AuthorId: 3}' tracked by 'LibraryDBContext' changed state from '"Unchanged"' to '"Modified"'.
2025-01-21 15:08:39.541 +03:00 [DBG] SaveChanges starting for 'LibraryDBContext'.
2025-01-21 15:08:39.541 +03:00 [DBG] DetectChanges starting for 'LibraryDBContext'.
2025-01-21 15:08:39.541 +03:00 [DBG] DetectChanges completed for 'LibraryDBContext'.
2025-01-21 15:08:39.573 +03:00 [DBG] Creating transaction savepoint.
2025-01-21 15:08:39.578 +03:00 [DBG] Created transaction savepoint.
2025-01-21 15:08:39.579 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:08:39.579 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:08:39.579 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:08:39.580 +03:00 [DBG] Executing DbCommand [Parameters=[@p3='3', @p0='22', @p1='3', @p2='Zaid' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Authors" SET "AuthorAge" = @p0, "AuthorType" = @p1, "Name" = @p2
WHERE "AuthorId" = @p3;
2025-01-21 15:08:39.630 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@p3='3', @p0='22', @p1='3', @p2='Zaid' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Authors" SET "AuthorAge" = @p0, "AuthorType" = @p1, "Name" = @p2
WHERE "AuthorId" = @p3;
2025-01-21 15:08:39.632 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:39.633 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2025-01-21 15:08:39.633 +03:00 [DBG] Releasing transaction savepoint.
2025-01-21 15:08:39.635 +03:00 [DBG] Released transaction savepoint.
2025-01-21 15:08:39.636 +03:00 [DBG] The 'Author' entity with key '{AuthorId: 3}' tracked by 'LibraryDBContext' changed state from '"Modified"' to '"Unchanged"'.
2025-01-21 15:08:39.636 +03:00 [DBG] SaveChanges completed for 'LibraryDBContext' with 1 entities written to the database.
2025-01-21 15:08:39.636 +03:00 [DBG] Committing transaction.
2025-01-21 15:08:39.644 +03:00 [DBG] Committed transaction.
2025-01-21 15:08:39.644 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:39.644 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:08:39.689 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 15:08:39.689 +03:00 [DBG] No information found on request to perform content negotiation.
2025-01-21 15:08:39.689 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 15:08:39.689 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 15:08:39.689 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 15:08:39.689 +03:00 [INF] Executing OkObjectResult, writing value of type 'LibraryManagementDomain.DTO.AuthorDTO'.
2025-01-21 15:08:39.690 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.AuthorsController.UpdateAuthor (LibraryManagementAPI) in 430.3168ms
2025-01-21 15:08:39.691 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.AuthorsController.UpdateAuthor (LibraryManagementAPI)'
2025-01-21 15:08:39.691 +03:00 [INF] HTTP PUT /api/Authors/3 responded 200 in 459.8975 ms
2025-01-21 15:08:39.691 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 15:08:39.691 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:39.691 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:08:39.691 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:44328/api/Authors/3 - 200 null application/json; charset=utf-8 464.777ms
2025-01-21 15:08:44.145 +03:00 [INF] Request starting HTTP/2 GET https://localhost:44328/api/Authors - null null
2025-01-21 15:08:44.145 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Authors'
2025-01-21 15:08:44.145 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)' with route pattern 'api/Authors' is valid for the request path '/api/Authors'
2025-01-21 15:08:44.146 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 15:08:44.146 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 15:08:44.148 +03:00 [DBG] Successfully validated the token.
2025-01-21 15:08:44.148 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-01-21 15:08:44.149 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 15:08:44.149 +03:00 [INF] Route matched with {action = "GetAuthors", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[LibraryManagementDomain.DTO.AuthorDTO]]] GetAuthors() on controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI).
2025-01-21 15:08:44.149 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["LibraryManagementApplication.Authorization.AuthorizeRoleOrPermissionAttribute"]
2025-01-21 15:08:44.149 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 15:08:44.149 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 15:08:44.150 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 15:08:44.150 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 15:08:44.150 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 15:08:44.153 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 15:08:44.153 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 15:08:44.153 +03:00 [INF] Logger:Fetching Authors
2025-01-21 15:08:44.155 +03:00 [DBG] Creating DbConnection.
2025-01-21 15:08:44.155 +03:00 [DBG] Created DbConnection. (0ms).
2025-01-21 15:08:44.155 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:44.155 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:44.155 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:08:44.155 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:08:44.156 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:08:44.156 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 15:08:44.162 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
2025-01-21 15:08:44.164 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Author' entity with key '{AuthorId: 1}'.
2025-01-21 15:08:44.164 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Author' entity with key '{AuthorId: 3}'.
2025-01-21 15:08:44.164 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:44.164 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2025-01-21 15:08:44.165 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:44.165 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:08:44.165 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 15:08:44.166 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-01-21 15:08:44.166 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-01-21 15:08:44.166 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 15:08:44.166 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 15:08:44.166 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-01-21 15:08:44.167 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[LibraryManagementDomain.Entities.Author, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[LibraryManagementDomain.DTO.AuthorDTO, LibraryManagementDomain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-21 15:08:44.168 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI) in 18.453ms
2025-01-21 15:08:44.168 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.AuthorsController.GetAuthors (LibraryManagementAPI)'
2025-01-21 15:08:44.169 +03:00 [INF] HTTP GET /api/Authors responded 200 in 22.1356 ms
2025-01-21 15:08:44.169 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 15:08:44.169 +03:00 [DBG] Connection ID "18302628916503773189" disconnecting.
2025-01-21 15:08:44.169 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:44.169 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:08:44.170 +03:00 [INF] Request finished HTTP/2 GET https://localhost:44328/api/Authors - 200 null application/json; charset=utf-8 24.9399ms
2025-01-21 15:08:48.316 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-01-21 15:08:48.316 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.007ms - processed: 0 items - remaining: 1 items
2025-01-21 15:08:50.878 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:44328/api/Authors/3 - null null
2025-01-21 15:08:50.881 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Authors/3'
2025-01-21 15:08:50.882 +03:00 [DBG] Endpoint 'LibraryManagementAPI.Controllers.AuthorsController.DeleteAuthor (LibraryManagementAPI)' with route pattern 'api/Authors/{id}' is valid for the request path '/api/Authors/3'
2025-01-21 15:08:50.882 +03:00 [DBG] Request matched endpoint 'LibraryManagementAPI.Controllers.AuthorsController.DeleteAuthor (LibraryManagementAPI)'
2025-01-21 15:08:50.883 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-01-21 15:08:50.886 +03:00 [DBG] Successfully validated the token.
2025-01-21 15:08:50.886 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-01-21 15:08:50.889 +03:00 [DBG] The request has an origin header: 'https://localhost:44328'.
2025-01-21 15:08:50.889 +03:00 [INF] CORS policy execution successful.
2025-01-21 15:08:50.890 +03:00 [INF] Executing endpoint 'LibraryManagementAPI.Controllers.AuthorsController.DeleteAuthor (LibraryManagementAPI)'
2025-01-21 15:08:50.900 +03:00 [INF] Route matched with {action = "DeleteAuthor", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteAuthor(Int32) on controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI).
2025-01-21 15:08:50.900 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["LibraryManagementApplication.Authorization.AuthorizeRoleOrPermissionAttribute"]
2025-01-21 15:08:50.900 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-21 15:08:50.901 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-21 15:08:50.901 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-21 15:08:50.901 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-21 15:08:50.902 +03:00 [DBG] Executing controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 15:08:50.903 +03:00 [DBG] Entity Framework Core 9.0.0 initialized 'LibraryDBContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: SensitiveDataLoggingEnabled 
2025-01-21 15:08:50.904 +03:00 [DBG] Executed controller factory for controller LibraryManagementAPI.Controllers.AuthorsController (LibraryManagementAPI)
2025-01-21 15:08:50.904 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-01-21 15:08:50.904 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-01-21 15:08:50.905 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-01-21 15:08:50.905 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-01-21 15:08:50.905 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-01-21 15:08:50.905 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-01-21 15:08:50.941 +03:00 [DBG] Creating DbConnection.
2025-01-21 15:08:50.941 +03:00 [DBG] Created DbConnection. (0ms).
2025-01-21 15:08:50.941 +03:00 [DBG] Opening connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:50.941 +03:00 [DBG] Opened connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:50.941 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-01-21 15:08:50.942 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-01-21 15:08:50.960 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:08:50.961 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:08:50.961 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:08:50.961 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
WHERE a."AuthorId" = @__p_0
LIMIT 1
2025-01-21 15:08:50.972 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT a."AuthorId", a."AuthorAge", a."AuthorType", a."Name"
FROM "Authors" AS a
WHERE a."AuthorId" = @__p_0
LIMIT 1
2025-01-21 15:08:50.974 +03:00 [DBG] Context 'LibraryDBContext' started tracking 'Author' entity with key '{AuthorId: 3}'.
2025-01-21 15:08:50.974 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:50.974 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2025-01-21 15:08:51.008 +03:00 [DBG] The 'Author' entity with key '{AuthorId: 3}' tracked by 'LibraryDBContext' changed state from '"Unchanged"' to '"Deleted"'.
2025-01-21 15:08:51.028 +03:00 [DBG] SaveChanges starting for 'LibraryDBContext'.
2025-01-21 15:08:51.028 +03:00 [DBG] DetectChanges starting for 'LibraryDBContext'.
2025-01-21 15:08:51.028 +03:00 [DBG] DetectChanges completed for 'LibraryDBContext'.
2025-01-21 15:08:51.051 +03:00 [DBG] Creating transaction savepoint.
2025-01-21 15:08:51.057 +03:00 [DBG] Created transaction savepoint.
2025-01-21 15:08:51.060 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-21 15:08:51.060 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:08:51.060 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-01-21 15:08:51.060 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='3'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Authors"
WHERE "AuthorId" = @p0;
2025-01-21 15:08:51.085 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='3'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Authors"
WHERE "AuthorId" = @p0;
2025-01-21 15:08:51.086 +03:00 [DBG] Closing data reader to 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:51.086 +03:00 [DBG] A data reader for 'postgres' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2025-01-21 15:08:51.086 +03:00 [DBG] Releasing transaction savepoint.
2025-01-21 15:08:51.091 +03:00 [DBG] Released transaction savepoint.
2025-01-21 15:08:51.098 +03:00 [DBG] The 'Author' entity with key '{AuthorId: 3}' tracked by 'LibraryDBContext' changed state from '"Deleted"' to '"Detached"'.
2025-01-21 15:08:51.099 +03:00 [DBG] SaveChanges completed for 'LibraryDBContext' with 1 entities written to the database.
2025-01-21 15:08:51.099 +03:00 [DBG] Committing transaction.
2025-01-21 15:08:51.108 +03:00 [DBG] Committed transaction.
2025-01-21 15:08:51.108 +03:00 [DBG] Closing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:51.108 +03:00 [DBG] Closed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:08:51.129 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-01-21 15:08:51.129 +03:00 [DBG] No information found on request to perform content negotiation.
2025-01-21 15:08:51.129 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-01-21 15:08:51.129 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-01-21 15:08:51.130 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-01-21 15:08:51.130 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-21 15:08:51.138 +03:00 [INF] Executed action LibraryManagementAPI.Controllers.AuthorsController.DeleteAuthor (LibraryManagementAPI) in 236.2675ms
2025-01-21 15:08:51.138 +03:00 [INF] Executed endpoint 'LibraryManagementAPI.Controllers.AuthorsController.DeleteAuthor (LibraryManagementAPI)'
2025-01-21 15:08:51.139 +03:00 [INF] HTTP DELETE /api/Authors/3 responded 200 in 255.6473 ms
2025-01-21 15:08:51.139 +03:00 [DBG] 'LibraryDBContext' disposed.
2025-01-21 15:08:51.140 +03:00 [DBG] Connection ID "18302628903618871310" disconnecting.
2025-01-21 15:08:51.140 +03:00 [DBG] Disposing connection to database 'postgres' on server 'tcp://localhost:5432'.
2025-01-21 15:08:51.141 +03:00 [DBG] Disposed connection to database 'postgres' on server 'tcp://localhost:5432' (0ms).
2025-01-21 15:08:51.142 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:44328/api/Authors/3 - 200 null text/plain; charset=utf-8 263.1485ms
2025-01-21 15:08:58.326 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-01-21 15:08:58.327 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0044ms - processed: 0 items - remaining: 1 items
2025-01-21 15:09:08.327 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-01-21 15:09:08.327 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.009ms - processed: 0 items - remaining: 1 items
2025-01-21 15:09:18.331 +03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-01-21 15:09:18.331 +03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
